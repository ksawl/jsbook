# **1.2.2.1 Методы Number**

> [Index](./0%20Index.md)
> || [1.2.2 Типы данных](./1.2.2%20Типы%20данных.md)

В JavaScript объект `Number` предоставляет полезные свойства и методы для работы с числами. Вот основные методы и их описание:

---

## **1. Методы преобразования**

### **`Number.toString([radix])`**

Метод toString() возвращает строковое представление указанного объекта Number.

**Синтаксис**

```js
numObj.toString([base]);
```

**Параметры**

- base - Необязательный параметр. Целое число между 2 и 36, определяющее основание системы счисления, используемой для представления числового значения.

```js
let num = 255;

alert(num.toString(16)); // ff
alert(num.toString(2)); // 11111111
```

`base` может варьироваться от 2 до 36 (по умолчанию 10).

Часто используемые:

`base=16` — для шестнадцатеричного представления цвета, кодировки символов и т.д., цифры могут быть 0..9 или A..F.

`base=2` — обычно используется для отладки побитовых операций, цифры 0 или 1.

`base=36` — максимальное основание, цифры могут быть 0..9 или A..Z. То есть, используется весь латинский алфавит для представления числа. Забавно, но можно использовать 36-разрядную систему счисления для получения короткого представления большого числового идентификатора. К примеру, для создания короткой ссылки. Для этого просто преобразуем его в 36-разрядную систему счисления:

```js
alert((123456).toString(36)); // 2n9c
```

> [!IMPORTANT]
>
> **Две точки для вызова метода**
> Внимание! Две точки в `123456..toString(36)` это не опечатка. Если нам надо вызвать метод непосредственно на числе, как `toString` в примере выше, то нам надо поставить две точки `..` после числа.
>
> Если мы поставим одну точку: `123456.toString(36)`, тогда это будет ошибкой, поскольку синтаксис JavaScript предполагает, что после первой точки начинается десятичная часть. А если поставить две точки, то JavaScript понимает, что десятичная часть отсутствует, и начинается метод.
>
> Также можно записать как `(123456).toString(36)`.

### **`Number.parseInt(string, [radix])`**

Для явного преобразования к числу можно использовать `+` или `Number()`. Если строка не является в точности числом, то результат будет `NaN`:

```js
alert(+'100px'); // NaN
```

Единственное исключение — это пробелы в начале строки и в конце, они игнорируются.

В реальной жизни мы часто сталкиваемся со значениями у которых есть единица измерения, например `"100px"` или `"12pt"` в CSS. Также во множестве стран символ валюты записывается после номинала `"19€"`. Так как нам получить числовое значение из таких строк?

Для этого есть `parseInt` и `parseFloat`.

Они «читают» число из строки. Если в процессе чтения возникает ошибка, они возвращают полученное до ошибки число. Функция `parseInt` возвращает целое число, а `parseFloat` возвращает число с плавающей точкой:

```js
alert(parseInt('100px')); // 100
alert(parseFloat('12.5em')); // 12.5

alert(parseInt('12.3')); // 12, вернётся только целая часть
alert(parseFloat('12.3.4')); // 12.3, произойдёт остановка чтения на второй точке
```

Функции `parseInt/parseFloat` вернут `NaN`, если не смогли прочитать ни одну цифру:

```js
alert(parseInt('a123')); // NaN, на первом символе происходит остановка чтения
```

- Преобразует строку в целое число.
- Если первый символ не получилось сконвертировать в число, то возвращается NaN.
- Второй аргумент (`radix`) целое число от 2 до 36, представляющее основание (основание в математической системе счисления) числа `string`.
  Если `radix` не определено или 0, предполагается, что равно 10, за исключением случаев, когда число начинается с пар кодовых единиц 0x или , в этом случае предполагается 0X основание системы счисления .16

> [!IMPORTANT]
>
> Если функция `parseInt` встречает символ, не являющийся числом в указанной системе счисления, она пропускает этот и все последующие символы (даже, если они подходящие) и возвращает целое число, преобразованное из части строки, предшествовавшей этому символу. `parseInt` отсекает дробную часть числа. Пробелы в начале и конце строки разрешены.

> [!TIP]
>
> Этот метод имеет ту же функциональность, что и глобальная функция `parseInt()`, и является частью ECMAScript 2015 (его цель — модуляризация глобальных переменных).
>
> ```js
> Number.parseInt === parseInt; // true
> ```

```javascript
console.log(Number.parseInt('42')); // 42
console.log(Number.parseInt('101', 2)); // 5 (двоичная система)
console.log(Number.parseInt('3.14')); // 3 (отбрасывает дробную часть)
console.log(parseInt('3.14')); // 3 (отбрасывает дробную часть)
console.log(parseInt('32yes')); // 32 (отбрасывает буквенную часть)
console.log(parseInt('Hello', 8)); // NaN, Не является числом
console.log(parseInt('546', 2)); // NaN, Неверное число в двоичной системе счисления
```

> [!CAUTION]
>
> Стоит отметить, что **не следует использовать** `parseInt` для преобразования строки в число. `var n = Number('123');` Вместо этого используйте или `Math.round()/Math.trunc()`, если вы хотите преобразовать число с плавающей точкой в ​​целое число. Используйте `parseInt` только при преобразовании между числами с разным основанием.
>
> - семантически, вам в большинстве случаев не нужно анализировать строку для получения числа, вам нужно выполнить преобразование типа, поэтому `Number()` имеет больше смысла.
> - `parseInt()` не должна использоваться как замена для `Math.floor()`.
>
> - `parseInt()` выполняется гораздо медленнее (хотя это не так уж и заметно).
>
> - `parseInt()` не выдает ошибку или предупреждение, если первый символ является цифрой. `parseInt('3asdfghhj')` просто вернет 3.
>
> - `parseInt()` преобразует входные данные в строку без ошибок и предупреждений. `parseInt([321,'asdf',window])` возвращает 321.
>
> - `parseInt()` не обрабатывает число `Infinity` правильно. `parseInt(Number.MAX_VALUE _ 2)` возвращает `NaN`, но `Number(Number.MAX_VALUE _ 2)` правильно возвращает `Infinity`
>
> - `parseInt()` некорректно обрабатывает отрицательные показатели. `parseInt(2e-6)` возвращает 0 и `parseInt(2e-7)` возвращает 2.
>
> - также не стоит использовать `parseInt` с `Array::map`. `Number`, однако работает хорошо.
>
> ```js
> ['0', '1', '2', '3', '4'].map(parseInt); // [0, NaN, NaN, NaN, NaN]
> ['0', '1', '2', '3', '4'].map(Number); // [0, 1, 2, 3, 4]
> ```

### **`Number.parseFloat(string)`**

- Преобразует строку в число с плавающей точкой.
- Если первый символ не может быть сконвертирован в число, то возвращается `NaN`.
- `parseFloat` разбирает текстовую строку, ищет и возвращает из неё десятичное число. Если функция встретит знак, отличный от (+ или -), цифр (0-9), разделительной точки, или показателя степени, она вернёт значение, предшествующее этому знаку, игнорируя все последующие символы. Допускаются позади и впереди идущие пробелы.
- `parseFloat` также может вернуть значение `Infinity` ("бесконечность"). Вы можете использовать функцию `isFinite`, чтобы определить, является ли результат конечным числом (`not Infinity`, `-Infinity`, или `NaN`).
- Этот метод ведёт себя идентично глобальной функции `parseFloat()` и является частью **ECMAScript 6** (его целью является модуляризация глобальных сущностей).

```javascript
console.log(Number.parseFloat('3.14')); // 3.14
console.log(Number.parseFloat('10px')); // 10
```

### **`Number.isFinite(value)`**

- Проверяет, является ли значение конечным числом.

```javascript
console.log(Number.isFinite(42)); // true
console.log(Number.isFinite(Infinity)); // false
console.log(Number.isFinite('42')); // false
```

### **`Number.isNaN(value)`**

- Проверяет, является ли значение `NaN` (но не преобразует).

```javascript
console.log(Number.isNaN(NaN)); // true
console.log(Number.isNaN('hello')); // false
console.log(isNaN('hello')); // true (преобразует и проверяет)
```

---

## **2. Работа с безопасными числами**

### **`Number.isInteger(value)`**

- Проверяет, является ли значение целым числом.

```javascript
console.log(Number.isInteger(42)); // true
console.log(Number.isInteger(3.14)); // false
```

### **`Number.isSafeInteger(value)`**

- Проверяет, является ли целое число безопасным (в диапазоне −253+1-2^{53} + 1 до 253−12^{53} - 1).

```javascript
console.log(Number.isSafeInteger(9007199254740991)); // true
console.log(Number.isSafeInteger(9007199254740992)); // false
```

---

## **3. Ограничения и округление**

### **`Number.toFixed(digits)`**

- Возвращает строку, представляющую число с фиксированным количеством знаков после запятой.

```javascript
let num = 3.14159;
console.log(num.toFixed(2)); // "3.14"
console.log(num.toFixed(0)); // "3"
```

### **`Number.toPrecision(digits)`**

- Возвращает строку с числом заданной общей точности (количество значащих цифр).

```javascript
let num = 3.14159;
console.log(num.toPrecision(3)); // "3.14"
console.log(num.toPrecision(1)); // "3"
```

### **`Number.toExponential(digits)`**

- Возвращает строку с числом в экспоненциальной форме.

```javascript
let num = 12345;
console.log(num.toExponential(2)); // "1.23e+4"
```

---

## **4. Константы объекта `Number`**

### **`Number.MAX_VALUE`**

- Максимальное положительное число, которое можно представить.

```javascript
console.log(Number.MAX_VALUE); // 1.7976931348623157e+308
```

### **`Number.MIN_VALUE`**

- Минимальное положительное число (близко к 0).

```javascript
console.log(Number.MIN_VALUE); // 5e-324
```

### **`Number.MAX_SAFE_INTEGER`**

- Максимальное безопасное целое число (253−12^{53} - 1).

```javascript
console.log(Number.MAX_SAFE_INTEGER); // 9007199254740991
```

### **`Number.MIN_SAFE_INTEGER`**

- Минимальное безопасное целое число (−253+1-2^{53} + 1).

```javascript
console.log(Number.MIN_SAFE_INTEGER); // -9007199254740991
```

### **`Number.POSITIVE_INFINITY` и `Number.NEGATIVE_INFINITY`**

- Представляют бесконечность и отрицательную бесконечность.

```javascript
console.log(Number.POSITIVE_INFINITY); // Infinity
console.log(Number.NEGATIVE_INFINITY); // -Infinity
```

### **`Number.NaN`**

- Значение `NaN`.

```javascript
console.log(Number.NaN); // NaN
```

---

## **Другие математические функции**

В JavaScript встроен объект `Math`, который содержит различные математические функции и константы.

Несколько примеров:

### **Math.random()**

Возвращает псевдослучайное число в диапазоне от 0 (включительно) до 1 (но не включая 1)

```js
alert(Math.random()); // 0.1234567894322
alert(Math.random()); // 0.5435252343232
alert(Math.random()); // ... (любое количество псевдослучайных чисел)
```

### **Math.max(a, b, c...) / Math.min(a, b, c...)**

Возвращает наибольшее/наименьшее число из перечисленных аргументов.

```js
alert(Math.max(3, 5, -10, 0, 1)); // 5
alert(Math.min(1, 2)); // 1
```

### **Math.pow(n, power)**

Возвращает число `n`, возведённое в степень `power`

```js
alert(Math.pow(2, 10)); // 2 в степени 10 = 1024
```

В объекте `Math` есть множество функций и констант, включая тригонометрические функции, подробнее можно ознакомиться в документации по объекту `Math`.

---

## **Полный пример использования:**

```javascript
let value = '42.7px';

console.log(Number.parseInt(value)); // 42
console.log(Number.parseFloat(value)); // 42.7
console.log(Number.isFinite(1 / 0)); // false
console.log(Number.isNaN(NaN)); // true
console.log(Number.isInteger(3.14)); // false

let num = 12345.6789;
console.log(num.toFixed(2)); // "12345.68"
console.log(num.toPrecision(3)); // "1.23e+4"
console.log(num.toExponential(2)); // "1.23e+4"

console.log(Number.MAX_SAFE_INTEGER); // 9007199254740991
console.log(Number.MIN_VALUE); // 5e-324
```
