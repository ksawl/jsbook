# **1.3.1 Условные операторы**

> [Index](./0%20Index.md)
> || [1.3 Управляющие конструкции](./1.3%20Управляющие%20конструкции.md)

Условные операторы в JavaScript позволяют выполнять код на основе заданного условия. Они играют важную роль в принятии решений и управлении потоком выполнения программы. Давайте рассмотрим основные типы условных операторов с подробными объяснениями и примерами кода.

## Оператор `if`

Оператор `if` используется для выполнения блока кода, если условие истинно (`true`).
Конструкции `if` могут быть однострочными

```js
let x = 10;

if (x > 5) console.log('x больше 5');
```

и многострочными, когда блок кода заключается в `{...}`

```javascript
let x = 10;

if (x > 5) {
    console.log('x больше 5');
}
```

В этом примере условие `x > 5` истинно, поэтому выполняется блок кода внутри оператора `if` и выводится сообщение `"x больше 5"`.

> [!NOTE]
>
> Рекомендуется использовать фигурные скобки `{}` всегда, когда вы используете инструкцию `if`, даже если выполняется только одна команда. Это улучшает читаемость кода.

### **Преобразование к логическому типу**

Инструкция `if (…)` вычисляет выражение в скобках и преобразует результат к логическому типу.

Давайте вспомним правила преобразования типов:

-   Число `0`, пустая строка `""`, `null`, `undefined` и `NaN` становятся `false`. Из-за этого их называют **«ложными»** («falsy») значениями.
-   Остальные значения становятся `true`, поэтому их называют **«правдивыми»** («truthy»).
    Таким образом, код при таком условии никогда не выполнится:

```js
if (0) { // 0 is falsy
...
}
```

…а при таком – выполнится всегда:

```js
if (1) { // 1 is truthy
...
}
```

Мы также можем передать заранее вычисленное в переменной логическое значение в `if`, например так:

```js
let condition = (year == 2015); // преобразуется к true или false

if (condition) {
...
}
```

## Оператор `else`

Необязательный оператор `else` используется для выполнения блока кода, если условие ложно (`false`).

**Пример:**

```javascript
let x = 3;

if (x > 5) {
    console.log('x больше 5');
} else {
    console.log('x меньше или равно 5');
}
```

Здесь условие `x > 5` ложно, поэтому выполняется блок кода внутри оператора `else` и выводится сообщение "x меньше или равно 5".

## Оператор `else if`

Оператор `else if` позволяет проверить несколько условий последовательно.

**Пример:**

```javascript
let x = 7;

if (x > 10) {
    console.log('x больше 10');
} else if (x > 5) {
    console.log('x больше 5, но меньше или равно 10');
} else {
    console.log('x меньше или равно 5');
}
```

В этом примере сначала проверяется условие `x > 10`, которое ложно. Затем проверяется условие `x > 5`, которое истинно. Поэтому выполняется блок кода внутри оператора `else if` и выводится сообщение `"x больше 5, но меньше или равно 10"`.

---

### **Оператор `!` в условиях `if`**

Оператор логического отрицания `!` часто используется в JavaScript для проверки истинности или ложности условий в выражениях `if`. Вот несколько примеров из реального кода.

#### **1. Проверка на отсутствие значения (Falsy)**

Оператор `!` может быть применён для проверки, является ли значение "ложным" (Falsy). В JavaScript к Falsy относятся: `undefined`, `null`, `false`, `0`, `NaN`, и пустая строка (`""`).

```javascript
let userName = '';

if (!userName) {
    console.log('Имя пользователя не задано.');
}
```

**Объяснение**:

-   Здесь `!userName` превращает пустую строку (`""`) в `true`.
-   Условие срабатывает, и сообщение выводится в консоль.

---

#### **2. Проверка на отсутствие объекта**

Если переменная может содержать объект или быть `null`, `!` помогает проверить, есть ли объект.

```javascript
let user = null;

if (!user) {
    console.log('Пользователь не найден.');
}
```

**Объяснение**:

-   `!user` срабатывает, так как `user` равен `null`, а это Falsy-значение.

---

#### **3. Условие для исключения значения**

Иногда `!` используется для проверки, что переменная **не соответствует** ожидаемому значению.

```javascript
let isLoggedIn = false;

if (!isLoggedIn) {
    console.log('Вы не вошли в систему.');
}
```

**Объяснение**:

-   `!isLoggedIn` превращает `false` в `true`, поэтому выполняется блок `if`.

---

#### **4. Инверсия булевого значения**

Оператор `!` может быть использован для инверсии значения, например, при проверке доступа.

```javascript
let hasAccess = false;

if (!hasAccess) {
    console.log('Доступ запрещён.');
}
```

**Объяснение**:

-   Здесь `!hasAccess` проверяет, что доступа нет.

---

#### **5. Проверка массива или строки на пустоту**

Часто нужно убедиться, что массив или строка не пустые.

**Пример с массивом:**

```javascript
let items = [];

if (!items.length) {
    console.log('Массив пуст.');
}
```

**Пример со строкой:**

```javascript
let input = '';

if (!input.trim()) {
    console.log('Строка пуста или содержит только пробелы.');
}
```

**Объяснение**:

-   `!items.length` проверяет, равна ли длина массива `0`.
-   `!input.trim()` проверяет, что строка пустая после удаления пробелов.

---

#### **6. Защита от неопределённых функций**

Если функция может быть не определена, перед вызовом удобно проверить её существование.

```javascript
let callback;

if (!callback) {
    console.log('Функция обратного вызова не задана.');
}
```

**Объяснение**:

-   Проверяется, что переменная `callback` равна `undefined` или другим Falsy-значениям.

---

#### **7. Проверка отсутствия ключа в объекте**

Если объект должен содержать определённый ключ, но вы не уверены, что он есть:

```javascript
let config = { debug: false };

if (!config.apiKey) {
    console.log('API-ключ отсутствует.');
}
```

**Объяснение**:

-   Проверяется, есть ли ключ `apiKey` и не равен ли он Falsy-значению.

---

#### **8. Использование двойного отрицания (!!)**

Двойной оператор отрицания `!!` иногда используется для явного преобразования в логическое значение. Например, `!` может быть частью проверки значения:

```javascript
let value = '';

if (!value) {
    console.log('Значение пустое или ложное.');
}
```

Или для преобразования:

```javascript
let value = 'Hello';

console.log(!!value); // true
```

#### 9. Пример реального кода

Использование оператора `!` с возвратом из функции (`return`) для ранней проверки условий — это популярная практика, известная как **"guard clause"**. Она помогает избежать вложенности и делает код более читаемым. Вот пример из реального применения:

---

**1. Пример: Проверка входящего аргумента**

Допустим, мы пишем функцию, которая отправляет уведомление пользователю. Если объект пользователя не передан (или имеет Falsy-значение), выполнение функции сразу завершается.

```javascript
function sendNotification(user) {
    // Ранний выход, если пользователь не передан
    if (!user) {
        console.log('Уведомление не отправлено: пользователь отсутствует.');
        return;
    }

    // Основная логика
    console.log(`Уведомление отправлено пользователю: ${user.name}`);
}
```

такой подход используется вместо

```javascript
function sendNotification(user) {
    // Ранний выход, если пользователь не передан
    if (user) {
        // Основная логика
        console.log(`Уведомление отправлено пользователю: ${user.name}`);
        return;
    } else {
        console.log('Уведомление не отправлено: пользователь отсутствует.');
        return;
    }
}
```

---

**2. Как это работает?**

1. Сначала проверяется, был ли передан объект `user`.
2. Если `user` равен `null`, `undefined`, или любому другому Falsy-значению, функция завершает выполнение.
3. В противном случае выполнение переходит к основной логике, и уведомление отправляется.

---

**3. Как это помогает?**

-   **Избежание вложенности:** Нет необходимости оборачивать основную логику в блок `if`, проверяя `user`.
-   **Повышение читаемости:** Логика сразу говорит, что делать, если входящие данные некорректны.

---

**4. Дополненный пример: Проверка нескольких условий**

```javascript
function processOrder(order) {
    if (!order) {
        console.log('Заказ не передан.');
        return;
    }

    if (!order.items || !order.items.length) {
        console.log('Заказ пуст.');
        return;
    }

    // Основная логика обработки заказа
    console.log(`Обрабатывается заказ с ${order.items.length} позициями.`);
}
```

---

**5. Почему это эффективно?**

1. Код читабелен: проверки на невалидные входные данные видны сразу.
2. Легко отладить: вы быстро видите, где функция может завершиться.

**Реальное применение:**  
Такие проверки часто используются в обработчиках запросов API, валидации данных перед выполнением операций или в библиотеках, работающих с пользовательскими аргументами.

Эти примеры показывают, как оператор `!` упрощает проверку на ложные значения, делает код более компактным и понятным.

---

## Тернарный оператор

Тернарный оператор (`? :`) — это краткая форма записи условного оператора. Он используется для присваивания значения переменной на основе условия. Его синтаксис основан на трёх частях (отсюда и название "тернарный"), и он позволяет заменить простую конструкцию `if-else` на одну строку.

### Общий синтаксис

```javascript
condition ? expression1 : expression2;
```

-   **`condition`** — условие, которое будет проверено. Если оно истинно (evaluates to `true`), выполняется **`expression1`**.
-   Если **`condition`** ложно (evaluates to `false`), выполняется **`expression2`**.

### Пример использования

#### 1. Простое условие

```javascript
let age = 18;
let access = age >= 18 ? 'Доступ разрешен' : 'Доступ запрещен';
console.log(access);
```

В этом примере условие `age >= 18` истинно, поэтому переменной `access` присваивается значение "Доступ разрешен". Если бы условие было ложно, переменной `access` присваивалось бы значение "Доступ запрещен".

#### Эквивалент через `if-else`

```javascript
let age = 18;
let accessAllowed;
if (age >= 18) {
    accessAllowed = 'Доступ разрешён';
} else {
    accessAllowed = 'Доступ запрещён';
}
console.log(accessAllowed); // "Доступ разрешён"
```

---

### Вложенные тернарные операторы

Тернарный оператор можно вкладывать, но это может ухудшить читаемость.

#### Пример

```javascript
let age = prompt('Возраст?', 18);

let message =
    age < 3
        ? 'Здравствуй, малыш!'
        : age < 18
        ? 'Привет!'
        : age < 100
        ? 'Здравствуйте!'
        : 'Какой необычный возраст!';

alert(message); // 'Здравствуйте!'
```

Поначалу может быть сложно понять, что происходит. Но при ближайшем рассмотрении мы видим, что это обычная последовательная проверка:

-   Первый знак вопроса проверяет `age < 3`.
-   Если верно – возвращает `'Здравствуй, малыш!'`. В противном случае, проверяет выражение после двоеточия `„:“`, вычисляет `age < 18`.
-   Если это верно – возвращает `'Привет!'`. В противном случае, проверяет выражение после следующего двоеточия `„:“`, вычисляет `age < 100`.
-   Если это верно – возвращает `'Здравствуйте!'`. В противном случае, возвращает выражение после последнего двоеточия – `'Какой необычный возраст!'`.

#### Эквивалент через `if-else`

```javascript
let age = 25;
let message;
if (age < 3) {
    message = 'Здравствуй, малыш!';
} else if (age < 18) {
    message = 'Привет!';
} else if (age < 100) {
    message = 'Здравствуйте!';
} else {
    message = 'Какой необычный возраст!';
}
console.log(message); // 'Здравствуйте!'
```

### Использование вместо `if`

Иногда тернарный оператор используется в качестве замены `if`:

```js
let company = prompt('Какая компания создала JavaScript?', '');

company == 'Netscape' ? alert('Верно!') : alert('Неправильно.');
```

В зависимости от условия `company == 'Netscape'`, будет выполнена либо первая, либо вторая часть после `?`.

Здесь мы не присваиваем результат переменной. Вместо этого мы выполняем различный код в зависимости от условия.

> [!IMPORTANT]
>
> Не рекомендуется использовать оператор вопросительного знака таким образом.
>
> Несмотря на то, что такая запись короче, чем эквивалентная инструкция `if`, она хуже читается.

Вот, для сравнения, тот же код, использующий `if`:

```js
let company = prompt('Какая компания создала JavaScript?', '');

if (company == 'Netscape') {
    alert('Верно!');
} else {
    alert('Неправильно.');
}
```

При чтении глаза сканируют код по вертикали. Блоки кода, занимающие несколько строк, воспринимаются гораздо легче, чем длинный горизонтальный набор инструкций.

Смысл тернарного оператора – вернуть то или иное значение, в зависимости от условия. Пожалуйста, используйте его именно для этого. Когда вам нужно выполнить разные ветви кода – используйте `if`.

---

### Использование с функциями

Тернарный оператор часто используется для простого вызова одной из двух функций в зависимости от условия.

#### Пример

```javascript
let isLoggedIn = true;

isLoggedIn ? showWelcomeMessage() : showLoginPrompt();

function showWelcomeMessage() {
    console.log('Добро пожаловать!');
}

function showLoginPrompt() {
    console.log('Пожалуйста, войдите в систему.');
}
```

---

### Возвращение значений

Тернарный оператор может возвращать любое значение, а не только строки.

#### Пример

```javascript
let num = 5;
let color = num > 0 ? 'зелёный' : 'красный';
console.log(color); // "зелёный"
```

#### Пример с массивами

```javascript
let userRole = 'admin';
let permissions = userRole === 'admin' ? ['read', 'write', 'delete'] : ['read'];
console.log(permissions); // ['read', 'write', 'delete']
```

---

### Тернарный оператор без `else`

Иногда можно использовать тернарный оператор только для выполнения одного действия, если условие истинно. Для этого просто указываем вторую часть как пустую строку или `null`.

#### Пример

```javascript
let isValid = true;
isValid ? console.log('Данные корректны') : null;
```

Однако в таких случаях лучше использовать обычный `if`, так как это более понятно.

---

### Тернарный оператор внутри JSX (React)

В React тернарный оператор используется для условного рендеринга.

#### Пример

```jsx
const isLoggedIn = true;

return (
    <div>
        {isLoggedIn ? <h1>Добро пожаловать!</h1> : <h1>Пожалуйста, войдите</h1>}
    </div>
);
```

---

### Подводные камни тернарного оператора

1. **Читаемость**:

    - Если условия и выражения становятся слишком длинными или вложенными, лучше использовать `if-else`.

2. **Переусложнение**:

    - Пример плохого кода:
        ```javascript
        let x = condition1 ? (condition2 ? 'A' : 'B') : condition3 ? 'C' : 'D';
        ```
    - Такой код сложно читать и понимать.

3. **Неявное преобразование типов**:
    - Будьте осторожны с выражениями, где тернарный оператор сравнивает значения с разными типами:
        ```javascript
        let result = someValue ? 'Истина' : 0;
        console.log(result);
        ```

---

### Итог

Тернарный оператор — мощный инструмент для написания лаконичного кода. Используйте его для коротких условий, когда это не ухудшает читаемость. Для более сложной логики лучше предпочесть `if-else`.

## Вложенные условия

Вы можете вкладывать условные операторы друг в друга для проверки более сложных условий.

**Пример:**

```javascript
let x = 20;

if (x > 10) {
    console.log('x больше 10');
    if (x > 15) {
        console.log('x больше 15');
    } else {
        console.log('x меньше или равно 15');
    }
} else {
    console.log('x меньше или равно 10');
}
```

В этом примере сначала проверяется условие `x > 10`, которое истинно. Затем внутри этого условия проверяется условие `x > 15`, которое также истинно. Таким образом, выводится сообщение "x больше 10" и "x больше 15".

---

## Задачи для закрепления материала

### 1. Положительное, отрицательное или равно нулю

Напишите код, который проверяет, является ли число положительным, отрицательным или равным нулю, и выводит соответствующее сообщение.

```javascript
let num = 5;

// Ваш код здесь
```

### 2. Четное, нечетное

Используя условный оператор `if else`, напишите код для проверки четного или нечетного числа.

```javascript
let num = 7;

// Ваш код здесь
```

### 3. Ограничение доступа по возрасту

Создайте условное выражение, которое проверяет возраст пользователя и выводит сообщение, разрешен ли ему доступ к определенному контенту (например, `18+`).

```javascript
let age = 17;

// Ваш код здесь
```

### 4. Тернарный четное, нечетное

Используйте тернарный оператор для присваивания переменной значения "even" или "odd" в зависимости от четности числа.

```javascript
let num = 10;
let result;

// Ваш код здесь
```

### 5. Проверка оценки

Напишите код, который проверяет оценку студента (число от 0 до 100) и выводит соответствующую оценку (например, "A", "B", "C", "D" или "F"). Градация оценок по 20 баллов, добавьте проверку на валидность вводимого значения.

```javascript
let score = 85;

// Ваш код здесь
```

### 6. Проверка на високосный год

Создайте программу, которая проверяет, является ли год високосным.

```javascript
let year = 2024;

// Ваш код здесь
```

### 7. Проверка температуры

Напишите код, который проверяет несколько условий для значения температуры (например, `x < 0` — холодно, `x >= 0 && x <= 30` — комфортно, `x > 30` — жарко).

```javascript
let temp = 25;

// Ваш код здесь
```

### 8. Проверка на диапазон значений

Напишите программу, которая проверяет, содержится ли заданное число в диапазоне от 1 до 100.

```javascript
let num = 50;

// Ваш код здесь
```

### 9. Проверка на кратность

Используя вложенные условия, создайте программу, которая проверяет, является ли число делимым на 2 и 3 одновременно.

```javascript
let num = 6;

// Ваш код здесь
```

### 10. Проверка на равенство

Создайте программу, которая проверяет, равны ли две переменные, и выводит сообщение "равны" или "не равны".

```javascript
let a = 5;
let b = 10;

// Ваш код здесь
```

### 11. Перепишите 'if' в '?'

Перепишите конструкцию `if` с использованием условного оператора `'?'`:

```js
let result;

if (a + b < 4) {
    result = 'Мало';
} else {
    result = 'Много';
}
```

### 12. Перепишите 'if..else' в '?'

Перепишите `if..else` с использованием нескольких операторов `'?'`.

Для читаемости рекомендуется разбить код на несколько строк.

```js
const login = 'Сотрудник';
let message;

if (login == 'Сотрудник') {
    message = 'Привет';
} else if (login == 'Директор') {
    message = 'Здравствуйте';
} else if (login == '') {
    message = 'Вы не ввели логин';
} else {
    message = 'Ваш логин не найден';
}

console.log(message);
```
