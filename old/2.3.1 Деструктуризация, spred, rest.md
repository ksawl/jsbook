# **2.3.1 Деструктуризация, spred, rest**

> [Index](./0%20Index.md)
> || [2.3 Деструктуризация, модули и итераторы](./2.3%20Деструктуризация,%20модули%20и%20итераторы.md)

---

Оператор `...` в JavaScript называется **spread** (распространение) или **rest** (остаток) в зависимости от контекста использования. Он позволяет работать с массивами, объектами и аргументами функций более гибко.

---

## 1. **Spread оператор (распространение)**

Spread оператор используется для "разворачивания" элементов массива или свойств объекта. Он позволяет копировать, объединять или передавать данные в функции.

### Использование с массивами

#### Пример 1: Копирование массива

```javascript
const arr1 = [1, 2, 3];
const arr2 = [...arr1]; // Копируем элементы arr1 в arr2

console.log(arr2); // [1, 2, 3]
```

Здесь `...arr1` разворачивает элементы массива `arr1`, и они помещаются в новый массив `arr2`. Теперь `arr2` — это независимая копия `arr1`.

#### Пример 2: Объединение массивов

```javascript
const arr1 = [1, 2];
const arr2 = [3, 4];
const combined = [...arr1, ...arr2];

console.log(combined); // [1, 2, 3, 4]
```

Spread оператор позволяет легко объединять массивы.

#### Пример 3: Добавление элементов в массив

```javascript
const arr1 = [1, 2];
const arr2 = [0, ...arr1, 3, 4];

console.log(arr2); // [0, 1, 2, 3, 4]
```

Здесь мы добавляем новые элементы до и после развернутого массива `arr1`.

---

### Использование с объектами

Spread оператор также работает с объектами, начиная с ES2018 (ES9).

#### Пример 1: Копирование объекта

```javascript
const obj1 = { a: 1, b: 2 };
const obj2 = { ...obj1 }; // Копируем свойства obj1 в obj2

console.log(obj2); // { a: 1, b: 2 }
```

Теперь `obj2` — это независимая копия `obj1`.

#### Пример 2: Объединение объектов

```javascript
const obj1 = { a: 1, b: 2 };
const obj2 = { c: 3, d: 4 };
const combined = { ...obj1, ...obj2 };

console.log(combined); // { a: 1, b: 2, c: 3, d: 4 }
```

Если свойства объектов совпадают, значение будет взято из последнего объекта:

```javascript
const obj1 = { a: 1, b: 2 };
const obj2 = { b: 99, c: 3 };
const combined = { ...obj1, ...obj2 };

console.log(combined); // { a: 1, b: 99, c: 3 }
```

Здесь свойство `b` перезаписано значением из `obj2`.

#### Пример 3: Добавление свойств в объект

```javascript
const obj1 = { a: 1, b: 2 };
const obj2 = { ...obj1, c: 3, d: 4 };

console.log(obj2); // { a: 1, b: 2, c: 3, d: 4 }
```

---

### Использование в функциях

Spread оператор может использоваться для передачи элементов массива в качестве аргументов функции.

#### Пример:

```javascript
function sum(a, b, c) {
    return a + b + c;
}

const numbers = [1, 2, 3];
console.log(sum(...numbers)); // 6
```

Здесь `...numbers` разворачивает массив `[1, 2, 3]` в аргументы функции `sum`.

---

## 2. **Rest оператор (остаток)**

Rest оператор `...` используется для сбора оставшихся элементов в массивы или объекты. Он часто применяется в функциях и деструктуризации.

### Использование в функциях

**Rest параметры** (остаточные параметры) позволяют функции принимать произвольное количество аргументов как массив. Это полезно в тех случаях, когда заранее неизвестно, сколько аргументов будет передано функции. **Rest параметры** объявляются с использованием троеточия (`...`) перед именем параметра.

### Синтаксис

```javascript
function func(...restParams) {
    // restParams = [arg1, arg2, arg3, ...]
    // тело функции
}
func(arg1, arg2, arg3, ...)
```

### Основные моменты использования

1. **Rest параметры должны быть последними в списке параметров функции.** Нельзя объявлять какие-либо параметры после rest параметров.
2. **Rest параметры собирают все переданные аргументы в массив.** Это позволяет вам работать с ними так же, как с любым другим массивом.

### Примеры использования Rest параметров

#### Пример 1: Функция суммирования произвольного количества чисел

```javascript
function sum(...numbers) {
    return numbers.reduce((acc, number) => acc + number, 0);
}

console.log(sum(1, 2, 3)); // Вывод: 6
console.log(sum(4, 5, 6, 7)); // Вывод: 22
console.log(sum(8, 9)); // Вывод: 17
```

В этом примере `...numbers` собирает все переданные аргументы в массив `numbers`, который затем суммируется с использованием метода `reduce`.

#### Пример 2: Объединение строк

```javascript
function concatenateStrings(...strings) {
    return strings.join(' ');
}

console.log(concatenateStrings('Hello', 'world', '!')); // Вывод: Hello world !
console.log(concatenateStrings('JavaScript', 'is', 'fun')); // Вывод: JavaScript is fun
```

В этом примере `...strings` собирает все переданные строки в массив `strings`, который затем объединяется в одну строку с пробелами между словами.

#### Пример 3: Функция для нахождения максимального числа

```javascript
function findMax(...numbers) {
    return Math.max(...numbers);
}

console.log(findMax(1, 3, 5, 7, 9)); // Вывод: 9
console.log(findMax(-10, 20, 5)); // Вывод: 20
```

В этом примере `...numbers` позволяет функции `findMax` принимать произвольное количество чисел и возвращать наибольшее из них, используя метод `Math.max`.

#### Пример 4: Функция для фильтрации уникальных значений

```javascript
function uniqueValues(...values) {
    return [...new Set(values)];
}

console.log(uniqueValues(1, 2, 2, 3, 4, 4, 5)); // Вывод: [1, 2, 3, 4, 5]
console.log(uniqueValues('a', 'b', 'a', 'c', 'b')); // Вывод: ["a", "b", "c"]
```

В этом примере `...values` собирает все переданные значения в массив `values`, который затем фильтруется с использованием `Set`, чтобы оставить только уникальные значения.

#### Пример 5: Функция для передачи оставшихся параметров

```javascript
function greet(greeting, ...names) {
    return `${greeting}, ${names.join(', ')}!`;
}

console.log(greet('Hello', 'Alice', 'Bob', 'Charlie')); // Вывод: Hello, Alice, Bob, Charlie!
console.log(greet('Hi', 'David', 'Emma')); // Вывод: Hi, David, Emma!
```

В этом примере первый параметр `greeting` принимает приветствие, а `...names` собирает все остальные переданные имена в массив `names`, который затем объединяется и используется в строке приветствия.

### Пример реального использования

#### Пример 6: Функция для группировки аргументов

```javascript
function groupArguments(...args) {
    const numbers = args.filter((arg) => typeof arg === 'number');
    const strings = args.filter((arg) => typeof arg === 'string');
    return { numbers, strings };
}

const result = groupArguments(1, 'hello', 2, 'world', 3);
console.log(result);
// Вывод: { numbers: [1, 2, 3], strings: ["hello", "world"] }
```

В этом примере `...args` собирает все переданные аргументы в массив `args`, который затем фильтруется для разделения чисел и строк в отдельные массивы.

#### Пример 7: Функция для создания объекта пользователя

```javascript
function createUser(name, age, ...interests) {
    return {
        name,
        age,
        interests,
    };
}

const user = createUser('John', 25, 'reading', 'traveling', 'coding');
console.log(user);
// Вывод: { name: "John", age: 25, interests: ["reading", "traveling", "coding"] }
```

В этом примере `...interests` собирает все интересы пользователя в массив, который затем включается в объект пользователя.

#### Пример 2: Комбинирование с обычными параметрами

```javascript
function logInfo(name, age, ...hobbies) {
    console.log(`Имя: ${name}, Возраст: ${age}`);
    console.log(`Хобби: ${hobbies.join(', ')}`);
}

logInfo('Алексей', 25, 'чтение', 'спорт', 'путешествия');

// Имя: Алексей, Возраст: 25
// Хобби: чтение, спорт, путешествия
```

Здесь первые два аргумента присваиваются `name` и `age`, а остальные собираются в массив `hobbies`.

---

### Использование в деструктуризации

Rest оператор также полезен при деструктуризации массивов и объектов.

#### Пример 1: Деструктуризация массива

```javascript
const [first, second, ...rest] = [1, 2, 3, 4, 5];

console.log(first); // 1
console.log(second); // 2
console.log(rest); // [3, 4, 5]
```

Здесь `...rest` собирает оставшиеся элементы массива.

#### Пример 2: Деструктуризация объекта

```javascript
const obj = { a: 1, b: 2, c: 3, d: 4 };
const { a, b, ...rest } = obj;

console.log(a); // 1
console.log(b); // 2
console.log(rest); // { c: 3, d: 4 }
```

Здесь `...rest` собирает оставшиеся свойства объекта.

---

## Итог

-   **Spread оператор (`...`)**:

    -   Разворачивает элементы массива или свойства объекта.
    -   Используется для копирования, объединения и передачи данных.
    -   Пример: `const arr = [...oldArr];`, `const obj = { ...oldObj };`.

-   **Rest оператор (`...`)**:
    -   Собирает оставшиеся элементы в массив или объект.
    -   Используется в функциях и деструктуризации.
    -   Пример: `function sum(...args) {}`, `const [first, ...rest] = arr;`.

Оба оператора делают код более лаконичным и удобным для работы с коллекциями данных.
