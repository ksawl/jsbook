# **1.4.2. Аргументы, параметры и возвращаемые значения**

> [Index](./0%20Index.md)
> || [1.4 Функции](./1.4%20Функции.md)

## |1| **Передача аргументов**

Значение, передаваемое в качестве параметра функции, также называется аргументом.

Другими словами:

**Параметр** – это переменная, указанная в круглых скобках в объявлении функции.
**Аргумент** – это значение, которое передаётся функции при её вызове.

Мы объявляем функции со списком параметров, затем вызываем их, передавая аргументы.

### Как передавать аргументы в функцию

Аргументы передаются в функцию, чтобы функция могла использовать эти значения при выполнении. Когда вы вызываете функцию, вы передаете значения в скобках.

**Пример:**

```javascript
function greet(name) {
    console.log(`Привет, ${name}!`);
}

greet('Алексей'); // Вывод: Привет, Алексей!
```

В этом примере `Алексей` является аргументом, передаваемым функции `greet` переданное значение **копируется** в локальную переменную `name`. Которая используется в теле функции и является ее параметром.

**Функция всегда получает только копию значения**

Вот ещё один пример: у нас есть переменная `from`, и мы передаём её функции у которой есть параметр `from`. Такое совпадение имен здесь выбрано не случайно: функция изменяет значение `from`, но это изменение не отражается на глобальной переменной `from`.

```js
function showMessage(from, text) {
    from = '*' + from + '*'; // немного украсим "from"

    alert(from + ': ' + text);
}

let from = 'Аня';

showMessage(from, 'Привет'); // *Аня*: Привет

// значение "from" осталось прежним, функция изменила значение локальной переменной
alert(from); // Аня
```

Рассматривая приведённый выше пример, мы могли бы сказать: «функция `showMessage` объявляется с двумя параметрами, затем вызывается с двумя аргументами: `from` и `"Привет"`».

### Аргументы по умолчанию

Если при вызове функции аргумент не был указан, то его значением становится `undefined`.
JavaScript позволяет задавать значения по умолчанию для параметров функции. Если аргумент не передается, используется значение по умолчанию.

**Пример:**

```javascript
function greet(name = 'гость') {
    console.log(`Привет, ${name}!`);
}

greet(); // Вывод: Привет, гость!
greet('Мир'); // Вывод: Привет, Мир!
```

В этом примере, если аргумент `name` не передается, используется значение по умолчанию `"гость"`, но могут быть и более сложное выражение, которое будет вычисляться при отстутствии параметра:

```js
function showMessage(from, text = anotherFunction()) {
    // anotherFunction() выполнится только если не передан text
    // результатом будет значение text
}
```

> [!TIP]
>
> **Вычисление параметров по умолчанию**
> В JavaScript параметры по умолчанию вычисляются каждый раз, когда функция вызывается без соответствующего аргумента.
>
> В приведённом выше примере, функция `anotherFunction()` не будет вызвана вообще, если указан аргумент `text`.
>
> С другой стороны, функция будет независимо вызываться каждый раз, когда аргумент `text` отсутствует.

### **Альтернативные параметры по умолчанию**

> [!NOTE]
>
> Ранние версии JavaScript не поддерживали параметры по умолчанию. Поэтому существуют альтернативные способы, которые могут встречаться в старых скриптах.

Иногда имеет смысл присваивать значения по умолчанию для параметров не в объявлении функции, а на более позднем этапе.

Во время выполнения функции мы можем проверить передачу параметра явно сравнив его с `undefined`:

```js
function showMessage(text) {
    // ...
    if (text === undefined) {
        // если параметр отсутствует
        text = 'пустое сообщение';
    }
    alert(text);
}
showMessage(); // пустое сообщение
```

…Или мы можем использовать оператор `||`:

```js
function showMessage(text) {
    // Если значение text ложно, тогда присвоить параметру text значение по умолчанию
    // Внимание, в этом варианте будет считаться отсутствующим значением
    // любое значение дающее false, в том числе и пустая строка text === ""
    text = text || 'пусто';
    ...
}
```

Современные движки JavaScript поддерживают оператор нулевого слияния `??`. Его использование будет лучшей практикой, в случае, если большинство ложных значений, таких как `0`, следует расценивать как «нормальные».

```js
function showCount(count) {
    // если count равен undefined или null, показать "неизвестно"
    alert(count ?? 'неизвестно');
}
showCount(0); // 0
showCount(null); // неизвестно
showCount(); // неизвестно
```

---

## |2| **Spread и Rest параметры**

> [!TIP]
>
> Подробнее про операторы `spread` и `rest` будем изучать в главе [2.3.2 Spread/rest операторы](./2.3.2%20Spread_rest%20операторы.md)

-   `Spread` оператор может использоваться для передачи элементов массива в качестве аргументов функции.

**Пример:**

```javascript
function sum(a, b, c) {
    return a + b + c;
}

const numbers = [1, 2, 3];
console.log(sum(...numbers)); // 6
```

Здесь `...numbers` разворачивает массив `[1, 2, 3]` в аргументы функции `sum`.

-   `Rest` параметры делают функции более гибкими и позволяют легко работать с произвольным количеством аргументов. Это особенно полезно в случаях, когда заранее неизвестно, сколько аргументов будет передано функции.

**Сбор аргументов функции**

```javascript
function sum(...args) {
    return args.reduce((acc, val) => acc + val, 0);
}

console.log(sum(1, 2, 3)); // 6
console.log(sum(1, 2, 3, 4, 5)); // 15
```

Здесь `...args` собирает все переданные аргументы в массив `args`.

Подробнее про `spread` и `rest` операторы будем говорить позже.

## |3| **Возвращаемые значения**

### Возврат значений из функции

Функция может возвращать результат своей работы, используя оператор `return`. Как только функция достигает оператора `return`, она завершает выполнение и возвращает указанное значение.

**Пример:**

```javascript
function add(a, b) {
    return a + b;
}

const result = add(3, 7);
console.log(result); // Вывод: 10
```

В этом примере функция `add` возвращает сумму двух чисел.

Директива `return` может находиться в любом месте тела функции. Как только выполнение доходит до этого места, функция останавливается, и значение возвращается в вызвавший её код (присваивается переменной `result` выше).

Вызовов `return` может быть несколько, например:

```js
function checkAge(age) {
    if (age >= 18) {
        return true;
    } else {
        return confirm('А родители разрешили?');
    }
}

let age = prompt('Сколько вам лет?', 18);

if (checkAge(age)) {
    alert('Доступ получен');
} else {
    alert('Доступ закрыт');
}
```

Возможно использовать `return` и без значения. Это приведёт к немедленному выходу из функции.

Например:

```js
function showMovie(age) {
    if (!checkAge(age)) {
        return;
    }

    alert('Вам показывается кино'); // (\*)
    // ...
}
```

В коде выше, если `checkAge(age)` вернёт `false`, `showMovie` не выполнит `alert`.

> [!NOTE]
>
> Результат функции с пустым `return` или без него – `undefined`
> Если функция не возвращает значения, это всё равно, как если бы она возвращала `undefined`:
>
> ```js
> function doNothing() {
>     /* пусто */
> }
>
> alert(doNothing() === undefined); // true
> ```
>
> Пустой `return` аналогичен `return undefined`:
>
> ```js
> function doNothing() {
>     return;
> }
>
> alert(doNothing() === undefined); // true
> ```

> [!WARNING]
>
> Никогда не добавляйте перевод строки между `return` и его значением
> Для длинного выражения в `return` может быть заманчиво разместить его на нескольких отдельных строках, например так:
>
> ```plaintext
> return
> (some + long + expression + or + whatever \* f(a) + f(b))
> ```
>
> Код не выполнится, потому что интерпретатор JavaScript подставит точку с запятой после `return`. Для него это будет выглядеть так:
>
> ```plaintext
> return;
> (some + long + expression + or + whatever \* f(a) + f(b))
> ```
>
> Таким образом, это фактически стало пустым `return`.
>
> Если мы хотим, чтобы возвращаемое выражение занимало несколько строк, нужно начать его на той же строке, что и `return`. Или, хотя бы, поставить там открывающую скобку, вот так:
>
> ```plaintext
> return (
>     some + long + expression
>     + or +
>     whatever * f(a) + f(b)
>     );
> ```
>
> И тогда всё сработает, как задумано.

### Множественные возвращаемые значения

JavaScript не поддерживает множественные возвращаемые значения напрямую. Однако, можно возвращать объект или массив, содержащий несколько значений.

**Пример с использованием объекта:**

```javascript
function getUser() {
    return {
        name: 'John',
        age: 30,
    };
}

const user = getUser();
console.log(user.name); // Вывод: John
console.log(user.age); // Вывод: 30
```

**Пример с использованием массива:**

```javascript
function getCoordinates() {
    return [50.45, 30.52];
}

const [latitude, longitude] = getCoordinates();
console.log(latitude); // Вывод: 50.45
console.log(longitude); // Вывод: 30.52
```

---

## |4| **Псевдомассив `arguments` в функциях**

Псевдомассив `arguments` — это специальный объект, доступный внутри обычных функций (не стрелочных), который содержит все аргументы, переданные в функцию. Он похож на массив, но не является настоящим массивом, поэтому у него нет методов массива, таких как `map`, `filter` или `reduce`. Давайте разберем эту тему подробнее.

---

### 1. **Что такое `arguments`?**

`arguments` — это объект, который доступен внутри тела функции и содержит все переданные в неё аргументы. Он похож на массив, но это псевдомассив, так как:

-   У него есть свойство `length`, которое указывает количество переданных аргументов.
-   К элементам можно обращаться по индексу, как в массиве (`arguments[0]`, `arguments[1]` и т.д.).
-   У него нет методов массива, таких как `push`, `pop`, `forEach` и других.

---

### 2. **Пример использования `arguments`**

Рассмотрим пример функции, которая использует `arguments` для работы с переданными аргументами.

```javascript
function sum() {
    let total = 0;
    for (let i = 0; i < arguments.length; i++) {
        total += arguments[i];
    }
    return total;
}

console.log(sum(1, 2, 3)); // 6
console.log(sum(10, 20)); // 30
```

Здесь:

-   `arguments` содержит все переданные аргументы: `1, 2, 3` или `10, 20`.
-   Мы используем цикл `for` для перебора элементов `arguments` и вычисления суммы.

---

### 3. **Свойства и особенности `arguments`**

#### a) **Свойство `length`**

Свойство `length` указывает количество переданных аргументов.

```javascript
function logArgs() {
    console.log(`Количество аргументов: ${arguments.length}`);
}

logArgs(1, 2, 3); // Количество аргументов: 3
logArgs('a', 'b'); // Количество аргументов: 2
```

#### b) **Доступ к элементам по индексу**

Элементы `arguments` можно получить по индексу, как в массиве.

```javascript
function logFirstArg() {
    console.log(`Первый аргумент: ${arguments[0]}`);
}

logFirstArg(10, 20, 30); // Первый аргумент: 10
```

#### c) **Псевдомассив, а не массив**

`arguments` не является настоящим массивом, поэтому у него нет методов массива, таких как `map`, `filter`, `reduce` и других.

```javascript
function tryArrayMethods() {
    arguments.map((arg) => console.log(arg)); // Ошибка: arguments.map is not a function
}

tryArrayMethods(1, 2, 3);
```

Чтобы использовать методы массива, нужно преобразовать `arguments` в настоящий массив.

---

### 4. **Преобразование `arguments` в массив**

Для работы с `arguments` как с массивом его можно преобразовать в настоящий массив. Это можно сделать несколькими способами.

#### a) **Использование `Array.from`**

`Array.from` создает массив из псевдомассива.

```javascript
function sum() {
    const args = Array.from(arguments);
    return args.reduce((acc, val) => acc + val, 0);
}

console.log(sum(1, 2, 3)); // 6
```

#### b) **Использование оператора `...` (spread)**

Оператор `...` (spread) позволяет преобразовать `arguments` в массив.

```javascript
function sum() {
    const args = [...arguments];
    return args.reduce((acc, val) => acc + val, 0);
}

console.log(sum(1, 2, 3)); // 6
```

#### c) **Использование `Array.prototype.slice`**

Метод `slice` можно использовать для преобразования `arguments` в массив.

```javascript
function sum() {
    const args = Array.prototype.slice.call(arguments);
    return args.reduce((acc, val) => acc + val, 0);
}

console.log(sum(1, 2, 3)); // 6
```

---

### 5. **Стрелочные функции и `arguments`**

Стрелочные функции **не имеют своего `arguments`**. Если попытаться использовать `arguments` внутри стрелочной функции, он будет ссылаться на `arguments` из окружающей обычной функции (если она есть).

**Пример:**

```javascript
function outerFunction() {
    const innerFunction = () => {
        console.log(arguments); // arguments из outerFunction
    };
    innerFunction();
}

outerFunction(1, 2, 3); // Вывод: [1, 2, 3]
```

Если стрелочная функция используется вне обычной функции, `arguments` будет недоступен:

```javascript
const arrowFunction = () => {
    console.log(arguments); // Ошибка: arguments is not defined
};

arrowFunction(1, 2, 3);
```

---

### 6. **Rest-параметры как альтернатива `arguments`**

Начиная с ES6, вместо `arguments` рекомендуется использовать rest-параметры. Rest-параметры позволяют собирать все переданные аргументы в настоящий массив.

**Пример:**

```javascript
function sum(...args) {
    return args.reduce((acc, val) => acc + val, 0);
}

console.log(sum(1, 2, 3)); // 6
```

Преимущества rest-параметров:

-   Это настоящий массив, поэтому доступны все методы массива.
-   Код становится более читаемым и современным.

---

### 7. **Итог**

-   `arguments` — это псевдомассив, доступный внутри обычных функций, который содержит все переданные аргументы.
-   У `arguments` есть свойство `length` и доступ к элементам по индексу, но нет методов массива.
-   `arguments` можно преобразовать в массив с помощью `Array.from`, оператора `...` или `Array.prototype.slice`.
-   Стрелочные функции не имеют своего `arguments`.
-   В современных проектах рекомендуется использовать rest-параметры (`...args`) вместо `arguments`.

**Примеры:**

```javascript
// Использование arguments
function logArgs() {
    console.log(arguments);
}

logArgs(1, 2, 3); // [1, 2, 3]

// Преобразование arguments в массив
function sum() {
    const args = [...arguments];
    return args.reduce((acc, val) => acc + val, 0);
}

console.log(sum(1, 2, 3)); // 6

// Использование rest-параметров
function sumRest(...args) {
    return args.reduce((acc, val) => acc + val, 0);
}

console.log(sumRest(1, 2, 3)); // 6
```

---

## |5| **Примеры реального использования в коде**

### Пример 1: Функция для вычисления средней оценки

```javascript
function calculateAverage(...scores) {
    const sum = scores.reduce((acc, score) => acc + score, 0);
    return sum / scores.length;
}

const average = calculateAverage(80, 90, 75);
console.log(average); // Вывод: 81.66666666666667
```

### Пример 2: Функция для форматирования имени пользователя

```javascript
function formatUserName(firstName, lastName = 'Doe') {
    return `${firstName} ${lastName}`;
}

console.log(formatUserName('John')); // Вывод: John Doe
console.log(formatUserName('Jane', 'Smith')); // Вывод: Jane Smith
```

### Пример 3: Функция для создания объекта пользователя

```javascript
function createUser(name, age) {
    return {
        name,
        age,
        isActive: true,
    };
}

const user = createUser('Alice', 28);
console.log(user); // Вывод: { name: "Alice", age: 28, isActive: true }
```

### Пример 4: Функция для поиска максимального числа

```javascript
function findMax(...numbers) {
    return Math.max(...numbers);
}

console.log(findMax(1, 5, 3, 9, 2)); // Вывод: 9
```

### Пример 5: Функция для фильтрации пользователей по возрасту

```javascript
function filterAdults(users) {
    return users.filter((user) => user.age >= 18);
}

const users = [
    { name: 'John', age: 17 },
    { name: 'Jane', age: 22 },
    { name: 'Alex', age: 15 },
];

const adults = filterAdults(users);
console.log(adults); // Вывод: [{ name: "Jane", age: 22 }]
```

### Пример 6: Функция для форматирования даты

```javascript
function formatDate(date = new Date()) {
    return date.toISOString().split('T')[0];
}

console.log(formatDate()); // Вывод: текущая дата в формате YYYY-MM-DD
console.log(formatDate(new Date('2022-01-01'))); // Вывод: 2022-01-01
```

---

## **Задачи**

### 1. **Сравнение двух чисел**

Сделайте функцию, которая параметрами принимает 2 числа. Если эти числа равны - пусть функция вернет true, а если не равны - false.

```js
console.log(isEqual(2, 3));
```

### 2. **Проверка максимального значения суммы двух чисел**

Сделайте функцию, которая параметрами принимает 2 числа. Если их сумма больше 10 - пусть вернет true, а если нет то - false.

```js
console.log(isSumBigger10(8, 3));
```

### 3. **Проверка на знак числа**

Сделайте функцию, которая параметром принимает число и проверяет - отрицательное оно или нет.
Если отрицательное - пусть функция вернет true, а если нет - false.

```js
console.log(isNegative(-2));
```

### 4. **Проверка на дипазон**

Сделайте функцию isNumberInRange, которая параметром принимает число и проверяет, что оно больше нуля и меньше 10.
Если это так - пусть функция возвращает true, если не так - false.

```js
console.log(isNumberInRange(5));
```

### 5. **Фильтрация массива**

Дан массив с числами. Запишите в новый массив только те числа, которые больше нуля и меньше 10-ти.
Для этого используйте вспомогательную функцию isNumberInRange из предыдущей задачи.

```js
const arr = [1, 2, -3, 4, 11, 8];

console.log(arrInRange(arr));
```

### 6. **Приведение суммы чисел**

Дано число. Сложите его цифры. Если сумма получилась более 9-ти, опять сложите его цифры.
И так, пока сумма не станет однозначным числом (9 и менее).

```js
console.log(getDigitsSum(678)); // 3
```

### 7. **Поиск суммы цифр в диапазоне**

Найдите все года от 1 до 2020, сумма цифр которых равна 13.
Для этого используйте вспомогательную функцию getDigitsSum из предыдущей задачи

### 8. **Поиск делителей числа**

Сделайте функцию getDivisors, которая параметром принимает число и
возвращает массив его делителей (чисел, на которое делится данное число).

```js
console.log(getDivisors(100));
```

### 9. **Среднее значение**

Напишите функцию `average`, которая принимает произвольное количество чисел и возвращает их среднее значение.

```javascript
function average(...numbers) {}

console.log(average(1, 2, 3, 4, 5)); // Вывод: 3
```

### 10. **Объединение массивов**

Напишите функцию `mergeArrays`, которая принимает два массива и возвращает один массив, содержащий все элементы обоих массивов.

```javascript
function mergeArrays(array1, array2) {}

console.log(mergeArrays([1, 2, 3], [4, 5, 6])); // Вывод: [1, 2, 3, 4, 5, 6]
```

### 11. **Переворот строки**

Напишите функцию `reverseString`, которая принимает строку и возвращает перевернутую строку.

```javascript
function reverseString(str) {}

console.log(reverseString('hello')); // Вывод: olleh
```

### 12. **Проверка массива**

Напишите функцию `isArray`, которая проверяет, является ли переданный аргумент массивом. Возвращает `true`, если является, и `false` в противном случае.

```javascript
function isArray(arg) {}

console.log(isArray([1, 2, 3])); // Вывод: true
console.log(isArray('hello')); // Вывод: false
```

### 13. **Нахождение минимального числа**

Напишите функцию `findMin`, которая принимает произвольное количество чисел и возвращает наименьшее из них.

```javascript
function findMin(...numbers) {}

console.log(findMin(3, 5, 1, 8, 2)); // Вывод: 1
```

### 14. **Перевод градусов Цельсия в Фаренгейты**

Напишите функцию `celsiusToFahrenheit`, которая принимает температуру в градусах Цельсия и возвращает температуру в Фаренгейтах.

```javascript
function celsiusToFahrenheit(celsius) {}

console.log(celsiusToFahrenheit(0)); // Вывод: 32
console.log(celsiusToFahrenheit(100)); // Вывод: 212
```

### 15. **Проверка символа**

Напишите функцию `isVowel`, которая принимает символ и проверяет, является ли он гласной. Возвращает `true`, если является, и `false` в противном случае.

```javascript
function isVowel(char) {}

console.log(isVowel('a')); // Вывод: true
console.log(isVowel('b')); // Вывод: false
```

### 16. **Объединение строк**

Напишите функцию `joinStrings`, которая принимает произвольное количество строк и возвращает одну строку, содержащую все переданные строки, разделенные пробелом.

```javascript
function joinStrings(...strings) {}

console.log(joinStrings('Hello', 'world', 'JavaScript')); // Вывод: Hello world JavaScript
```
