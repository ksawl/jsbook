# **1.4.2. Аргументы, параметры и возвращаемые значения**

> [Index](./0%20Index.md)
> || [1.4 Функции](./1.4%20Функции.md)

## 1. Передача аргументов

Значение, передаваемое в качестве параметра функции, также называется аргументом.

Другими словами:

**Параметр** – это переменная, указанная в круглых скобках в объявлении функции.
**Аргумент** – это значение, которое передаётся функции при её вызове.

Мы объявляем функции со списком параметров, затем вызываем их, передавая аргументы.

### Как передавать аргументы в функцию

Аргументы передаются в функцию, чтобы функция могла использовать эти значения при выполнении. Когда вы вызываете функцию, вы передаете значения в скобках.

**Пример:**

```javascript
function greet(name) {
    console.log(`Привет, ${name}!`);
}

greet('Алексей'); // Вывод: Привет, Алексей!
```

В этом примере `Алексей` является аргументом, передаваемым функции `greet` переданное значение копируется в локальную переменную `name`. Которая используется в теле функции.

Вот ещё один пример: у нас есть переменная `from`, и мы передаём её функции. Обратите внимание: функция изменяет значение `from`, но это изменение не видно снаружи. Функция всегда получает только копию значения:

```js
function showMessage(from, text) {
    from = '*' + from + '*'; // немного украсим "from"

    alert(from + ': ' + text);
}

let from = 'Аня';

showMessage(from, 'Привет'); // *Аня*: Привет

// значение "from" осталось прежним, функция изменила значение локальной переменной
alert(from); // Аня
```

Рассматривая приведённый выше пример, мы могли бы сказать: «функция `showMessage` объявляется с двумя параметрами, затем вызывается с двумя аргументами: `from` и `"Привет"`».

### Аргументы по умолчанию

Если при вызове функции аргумент не был указан, то его значением становится `undefined`.
JavaScript позволяет задавать значения по умолчанию для параметров функции. Если аргумент не передается, используется значение по умолчанию.

**Пример:**

```javascript
function greet(name = 'гость') {
    console.log(`Привет, ${name}!`);
}

greet(); // Вывод: Привет, гость!
greet('Мир'); // Вывод: Привет, Мир!
```

В этом примере, если аргумент `name` не передается, используется значение по умолчанию `"гость"`, но могут быть и более сложное выражение, которое будет вычисляться при отстутствии параметра:

```js
function showMessage(from, text = anotherFunction()) {
    // anotherFunction() выполнится только если не передан text
    // результатом будет значение text
}
```

> [!TIP]
>
> **Вычисление параметров по умолчанию**
> В JavaScript параметры по умолчанию вычисляются каждый раз, когда функция вызывается без соответствующего аргумента.
>
> В приведённом выше примере, функция `anotherFunction()` не будет вызвана вообще, если указан аргумент `text`.
>
> С другой стороны, функция будет независимо вызываться каждый раз, когда аргумент `text` отсутствует.

> [!TIP]
>
> Использование параметров по умолчанию в ранних версиях JavaScript
> Ранние версии JavaScript не поддерживали параметры по умолчанию. Поэтому существуют альтернативные способы, которые могут встречаться в старых скриптах.

Например, явная проверка на `undefined`:

```js
function showMessage(from, text) {
    if (text === undefined) {
        text = 'текст не добавлен';
    }

    alert(from + ': ' + text);
}
```

…Или с помощью оператора `||`:

```js
function showMessage(from, text) {
// Если значение text ложно, тогда присвоить параметру text значение по умолчанию
// заметим, что при этом пустая строка text === "" будет также считаться отсутствующим значением
text = text || 'текст не добавлен';
...
}
```

### **Альтернативные параметры по умолчанию**

Иногда имеет смысл присваивать значения по умолчанию для параметров не в объявлении функции, а на более позднем этапе.

Во время выполнения функции мы можем проверить, передан ли параметр, сравнив его с `undefined`:

```js
function showMessage(text) {
    // ...
    if (text === undefined) {
        // если параметр отсутствует
        text = 'пустое сообщение';
    }
    alert(text);
}
showMessage(); // пустое сообщение
```

…Или мы можем использовать оператор `||`:

```js
function showMessage(text) {
    // если значение text ложно или равняется undefined, тогда присвоить text значение 'пусто'
    text = text || 'пусто';
    ...
}
```

Современные движки JavaScript поддерживают оператор нулевого слияния `??`. Его использование будет лучшей практикой, в случае, если большинство ложных значений, таких как `0`, следует расценивать как «нормальные».

```js
function showCount(count) {
    // если count равен undefined или null, показать "неизвестно"
    alert(count ?? 'неизвестно');
}
showCount(0); // 0
showCount(null); // неизвестно
showCount(); // неизвестно
```

---

## 2. Rest параметры

**Rest параметры** (остаточные параметры) позволяют функции принимать произвольное количество аргументов как массив. Это полезно в тех случаях, когда заранее неизвестно, сколько аргументов будет передано функции. **Rest параметры** объявляются с использованием троеточия (`...`) перед именем параметра.

### Синтаксис

```javascript
function func(...restParams) {
    // restParams = [arg1, arg2, arg3, ...]
    // тело функции
}
func(arg1, arg2, arg3, ...)
```

### Основные моменты использования

1. **Rest параметры должны быть последними в списке параметров функции.** Нельзя объявлять какие-либо параметры после rest параметров.
2. **Rest параметры собирают все переданные аргументы в массив.** Это позволяет вам работать с ними так же, как с любым другим массивом.

### Примеры использования Rest параметров

#### Пример 1: Функция суммирования произвольного количества чисел

```javascript
function sum(...numbers) {
    return numbers.reduce((acc, number) => acc + number, 0);
}

console.log(sum(1, 2, 3)); // Вывод: 6
console.log(sum(4, 5, 6, 7)); // Вывод: 22
console.log(sum(8, 9)); // Вывод: 17
```

В этом примере `...numbers` собирает все переданные аргументы в массив `numbers`, который затем суммируется с использованием метода `reduce`.

#### Пример 2: Объединение строк

```javascript
function concatenateStrings(...strings) {
    return strings.join(' ');
}

console.log(concatenateStrings('Hello', 'world', '!')); // Вывод: Hello world !
console.log(concatenateStrings('JavaScript', 'is', 'fun')); // Вывод: JavaScript is fun
```

В этом примере `...strings` собирает все переданные строки в массив `strings`, который затем объединяется в одну строку с пробелами между словами.

#### Пример 3: Функция для нахождения максимального числа

```javascript
function findMax(...numbers) {
    return Math.max(...numbers);
}

console.log(findMax(1, 3, 5, 7, 9)); // Вывод: 9
console.log(findMax(-10, 20, 5)); // Вывод: 20
```

В этом примере `...numbers` позволяет функции `findMax` принимать произвольное количество чисел и возвращать наибольшее из них, используя метод `Math.max`.

#### Пример 4: Функция для фильтрации уникальных значений

```javascript
function uniqueValues(...values) {
    return [...new Set(values)];
}

console.log(uniqueValues(1, 2, 2, 3, 4, 4, 5)); // Вывод: [1, 2, 3, 4, 5]
console.log(uniqueValues('a', 'b', 'a', 'c', 'b')); // Вывод: ["a", "b", "c"]
```

В этом примере `...values` собирает все переданные значения в массив `values`, который затем фильтруется с использованием `Set`, чтобы оставить только уникальные значения.

#### Пример 5: Функция для передачи оставшихся параметров

```javascript
function greet(greeting, ...names) {
    return `${greeting}, ${names.join(', ')}!`;
}

console.log(greet('Hello', 'Alice', 'Bob', 'Charlie')); // Вывод: Hello, Alice, Bob, Charlie!
console.log(greet('Hi', 'David', 'Emma')); // Вывод: Hi, David, Emma!
```

В этом примере первый параметр `greeting` принимает приветствие, а `...names` собирает все остальные переданные имена в массив `names`, который затем объединяется и используется в строке приветствия.

### Пример реального использования

#### Пример 6: Функция для группировки аргументов

```javascript
function groupArguments(...args) {
    const numbers = args.filter((arg) => typeof arg === 'number');
    const strings = args.filter((arg) => typeof arg === 'string');
    return { numbers, strings };
}

const result = groupArguments(1, 'hello', 2, 'world', 3);
console.log(result);
// Вывод: { numbers: [1, 2, 3], strings: ["hello", "world"] }
```

В этом примере `...args` собирает все переданные аргументы в массив `args`, который затем фильтруется для разделения чисел и строк в отдельные массивы.

#### Пример 7: Функция для создания объекта пользователя

```javascript
function createUser(name, age, ...interests) {
    return {
        name,
        age,
        interests,
    };
}

const user = createUser('John', 25, 'reading', 'traveling', 'coding');
console.log(user);
// Вывод: { name: "John", age: 25, interests: ["reading", "traveling", "coding"] }
```

В этом примере `...interests` собирает все интересы пользователя в массив, который затем включается в объект пользователя.

Rest параметры делают функции более гибкими и позволяют легко работать с произвольным количеством аргументов. Это особенно полезно в случаях, когда заранее неизвестно, сколько аргументов будет передано функции.

## 3. Возвращаемые значения

### Возврат значений из функции

Функция может возвращать результат своей работы, используя оператор `return`. Как только функция достигает оператора `return`, она завершает выполнение и возвращает указанное значение.

**Пример:**

```javascript
function add(a, b) {
    return a + b;
}

const result = add(3, 7);
console.log(result); // Вывод: 10
```

В этом примере функция `add` возвращает сумму двух чисел.

Директива `return` может находиться в любом месте тела функции. Как только выполнение доходит до этого места, функция останавливается, и значение возвращается в вызвавший её код (присваивается переменной `result` выше).

Вызовов `return` может быть несколько, например:

```js
function checkAge(age) {
    if (age >= 18) {
        return true;
    } else {
        return confirm('А родители разрешили?');
    }
}

let age = prompt('Сколько вам лет?', 18);

if (checkAge(age)) {
    alert('Доступ получен');
} else {
    alert('Доступ закрыт');
}
```

Возможно использовать `return` и без значения. Это приведёт к немедленному выходу из функции.

Например:

```js
function showMovie(age) {
    if (!checkAge(age)) {
        return;
    }

    alert('Вам показывается кино'); // (\*)
    // ...
}
```

В коде выше, если `checkAge(age)` вернёт `false`, `showMovie` не выполнит `alert`.

> [!NOTE]
>
> Результат функции с пустым `return` или без него – `undefined`
> Если функция не возвращает значения, это всё равно, как если бы она возвращала `undefined`:
>
> ```js
> function doNothing() {
>     /* пусто */
> }
>
> alert(doNothing() === undefined); // true
> ```
>
> Пустой `return` аналогичен `return undefined`:
>
> ```js
> function doNothing() {
>     return;
> }
>
> alert(doNothing() === undefined); // true
> ```

> [!WARNING]
>
> Никогда не добавляйте перевод строки между `return` и его значением
> Для длинного выражения в `return` может быть заманчиво разместить его на нескольких отдельных строках, например так:
>
> ```plaintext
> return
> (some + long + expression + or + whatever \* f(a) + f(b))
> ```
>
> Код не выполнится, потому что интерпретатор JavaScript подставит точку с запятой после `return`. Для него это будет выглядеть так:
>
> ```plaintext
> return;
> (some + long + expression + or + whatever \* f(a) + f(b))
> ```
>
> Таким образом, это фактически стало пустым `return`.
>
> Если мы хотим, чтобы возвращаемое выражение занимало несколько строк, нужно начать его на той же строке, что и `return`. Или, хотя бы, поставить там открывающую скобку, вот так:
>
> ```plaintext
> return (
>     some + long + expression
>     + or +
>     whatever * f(a) + f(b)
>     );
> ```
>
> И тогда всё сработает, как задумано.

### Множественные возвращаемые значения

JavaScript не поддерживает множественные возвращаемые значения напрямую. Однако, можно возвращать объект или массив, содержащий несколько значений.

**Пример с использованием объекта:**

```javascript
function getUser() {
    return {
        name: 'John',
        age: 30,
    };
}

const user = getUser();
console.log(user.name); // Вывод: John
console.log(user.age); // Вывод: 30
```

**Пример с использованием массива:**

```javascript
function getCoordinates() {
    return [50.45, 30.52];
}

const [latitude, longitude] = getCoordinates();
console.log(latitude); // Вывод: 50.45
console.log(longitude); // Вывод: 30.52
```

## Примеры реального использования в коде

### Пример 1: Функция для вычисления средней оценки

```javascript
function calculateAverage(...scores) {
    const sum = scores.reduce((acc, score) => acc + score, 0);
    return sum / scores.length;
}

const average = calculateAverage(80, 90, 75);
console.log(average); // Вывод: 81.66666666666667
```

### Пример 2: Функция для форматирования имени пользователя

```javascript
function formatUserName(firstName, lastName = 'Doe') {
    return `${firstName} ${lastName}`;
}

console.log(formatUserName('John')); // Вывод: John Doe
console.log(formatUserName('Jane', 'Smith')); // Вывод: Jane Smith
```

### Пример 3: Функция для создания объекта пользователя

```javascript
function createUser(name, age) {
    return {
        name,
        age,
        isActive: true,
    };
}

const user = createUser('Alice', 28);
console.log(user); // Вывод: { name: "Alice", age: 28, isActive: true }
```

### Пример 4: Функция для поиска максимального числа

```javascript
function findMax(...numbers) {
    return Math.max(...numbers);
}

console.log(findMax(1, 5, 3, 9, 2)); // Вывод: 9
```

### Пример 5: Функция для фильтрации пользователей по возрасту

```javascript
function filterAdults(users) {
    return users.filter((user) => user.age >= 18);
}

const users = [
    { name: 'John', age: 17 },
    { name: 'Jane', age: 22 },
    { name: 'Alex', age: 15 },
];

const adults = filterAdults(users);
console.log(adults); // Вывод: [{ name: "Jane", age: 22 }]
```

### Пример 6: Функция для форматирования даты

```javascript
function formatDate(date = new Date()) {
    return date.toISOString().split('T')[0];
}

console.log(formatDate()); // Вывод: текущая дата в формате YYYY-MM-DD
console.log(formatDate(new Date('2022-01-01'))); // Вывод: 2022-01-01
```

---

## **Задачи**

1. **Среднее значение**
   Напишите функцию `average`, которая принимает произвольное количество чисел и возвращает их среднее значение.

```javascript
function average(...numbers) {}

console.log(average(1, 2, 3, 4, 5)); // Вывод: 3
```

2. **Объединение массивов**
   Напишите функцию `mergeArrays`, которая принимает два массива и возвращает один массив, содержащий все элементы обоих массивов.

```javascript
function mergeArrays(array1, array2) {}

console.log(mergeArrays([1, 2, 3], [4, 5, 6])); // Вывод: [1, 2, 3, 4, 5, 6]
```

3. **Переворот строки**
   Напишите функцию `reverseString`, которая принимает строку и возвращает перевернутую строку.

```javascript
function reverseString(str) {}

console.log(reverseString('hello')); // Вывод: olleh
```

4. **Проверка массива**
   Напишите функцию `isArray`, которая проверяет, является ли переданный аргумент массивом. Возвращает `true`, если является, и `false` в противном случае.

```javascript
function isArray(arg) {}

console.log(isArray([1, 2, 3])); // Вывод: true
console.log(isArray('hello')); // Вывод: false
```

5. **Нахождение минимального числа**
   Напишите функцию `findMin`, которая принимает произвольное количество чисел и возвращает наименьшее из них.

```javascript
function findMin(...numbers) {}

console.log(findMin(3, 5, 1, 8, 2)); // Вывод: 1
```

6. **Перевод градусов Цельсия в Фаренгейты**
   Напишите функцию `celsiusToFahrenheit`, которая принимает температуру в градусах Цельсия и возвращает температуру в Фаренгейтах.

```javascript
function celsiusToFahrenheit(celsius) {}

console.log(celsiusToFahrenheit(0)); // Вывод: 32
console.log(celsiusToFahrenheit(100)); // Вывод: 212
```

7. **Проверка символа**
   Напишите функцию `isVowel`, которая принимает символ и проверяет, является ли он гласной. Возвращает `true`, если является, и `false` в противном случае.

```javascript
function isVowel(char) {}

console.log(isVowel('a')); // Вывод: true
console.log(isVowel('b')); // Вывод: false
```

8. **Объединение строк**
   Напишите функцию `joinStrings`, которая принимает произвольное количество строк и возвращает одну строку, содержащую все переданные строки, разделенные пробелом.

```javascript
function joinStrings(...strings) {}

console.log(joinStrings('Hello', 'world', 'JavaScript')); // Вывод: Hello world JavaScript
```
